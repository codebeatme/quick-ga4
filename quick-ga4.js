(()=>{
/*! Quick GA4 v1.1.1, CC-BY-NC-ND-4.0, learnscript.net/zh-hant/google-analytics/toolkits/quick-ga4/ */
"use strict";class o{static n=navigator;static d=document;static w=window;static t={};static i={};static h=(t,s)=>{var s=new g(s),[,e,,i]=s.l;const r=(e+s.rect.height)/i*100;o.i[t].forEach(t=>t(r))};static o=(t,s)=>o.i[t].push(s);static u=t=>clearTimeout(o.t[t]);static g=(s,e)=>{o.i[s]??=[];const i=o["t"];var t=new g(e);t.m("scroll",t=>{o.u(s),i[s]=setTimeout(o.h,200,s,e)}),ResizeObserver&&new ResizeObserver(()=>{o.u(s),i[s]=setTimeout(o.h,200,s,e)}).observe(t.element)};static get _(){return!/Android|webOS|iPhone|iPad|iPod/i.test(o.n.userAgent)}}class u{static p=(t,s=!1)=>{s=s?sessionStorage:localStorage;try{return null!=s.getItem("cbm-"+t)}catch{return!1}};static getData=(t,s=null,e=!1)=>{var i=e?sessionStorage:localStorage,r="cbm-"+t,n=u.p(t,e);n||null==s||u.setData(t,s,e);try{return[i.getItem(r),n]}catch{return[null,!1]}};static setData=(t,s,e=!1)=>{e=e?sessionStorage:localStorage;if(null!=s)try{e.setItem("cbm-"+t,s.toString())}catch{}};static R=(t,s=!1)=>{s=s?sessionStorage:localStorage;try{s.removeItem("cbm-"+t)}catch{}}}class g{get S(){return null==this.element}get M(){return this.element==o.d}get rect(){return this.S||this.M?null:this.element.getBoundingClientRect()}get l(){return this.S||this.M?null:[this.element.scrollLeft,this.element.scrollTop,this.element.scrollWidth,this.element.scrollHeight]}get id(){return this.S||this.M?null:this.element.id}get text(){return this.S?null:this.element.textContent}set text(t){this.S||(this.element.textContent=t)}get URL(){var t=this.N("href");try{return new URL(t)}catch{return null}}T;get elements(){return this.T}set elements(t){(this.T=t)?[this.element]=t:this.element=void 0}constructor(t){"string"==typeof t?(this.element=document,this.find(t)):this.elements=[t]}find(t){return this.S||(this.elements=this.element.querySelectorAll(t)),this}k(t){return this.S||Array.from(this.elements).forEach(t),this}N(t,s=null){return this.S||this.M?null:(null!=s&&this.element.setAttribute(t,s),this.element.getAttribute(t))}m(s,e){return this.S||this.elements.forEach(t=>t.addEventListener(s,e)),this}}class d{static join=(t,s,e=!1)=>{if(s){var i=[];if(e)for(const r in s)i.push(encodeURIComponent(r)+"="+encodeURIComponent(s[r]));else for(const n in s)i.push(n+"="+s[n]);i.length&&(t+=(t.includes("?")?"&":"?")+i.join("&"))}return t}}class v{_p=Math.ceil(2147483647*Math.random());_s=1;D=!0;_et=0;q=0;P=[];U;get cid(){var[t]=u.getData(this.id+"-cid_v4",v.A()+"."+v.A());return t}set cid(t){u.setData(this.id+"-cid_v4",t)}get C(){return u.p(this.id+"-cid_v4")}get sid(){var[t]=u.getData(this.id+"-sid_v4");return Number(t)}set sid(t){u.setData(this.id+"-sid_v4",t)}get I(){return u.p(this.id+"-sid_v4")}get sct(){var[t]=u.getData(this.id+"-sct_v4",1);return Number(t)}set sct(t){u.setData(this.id+"-sct_v4",t)}get seg(){var[t]=u.getData(this.id+"-seg_v4",0);return Number(t)}set seg(t){u.setData(this.id+"-seg_v4",t)}get L(){var[t]=u.getData(this.id+"-lt_v4",v.A());return Number(t)}set L(t){u.setData(this.id+"-lt_v4",t)}get O(){var[t]=u.getData(this.id+"-spv_v4",0);return Number(t)}set O(t){u.setData(this.id+"-spv_v4",t),0==this.seg&&2<=t&&(this.seg=1)}get $(){var[t]=u.getData(this.id+"-sett_v4",0);return Number(t)}set $(t){u.setData(this.id+"-sett_v4",t),0==this.seg&&t>=1e3*this.V&&(this.seg=1)}constructor({id:t,url:s="https://www.google-analytics.com/g/collect",session:{timeout:e=1800,engagementMin:i=10,engagementType:r="focus"}={},event:{pageView:n="*",userEngagement:h="beforeunload",scroll:l="body",outbound:a=[],viewSearchResults:c="q,s,search,query,keyword",fileDownload:o="(?<=\\.)(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$"}={},trigger:{userEngagementMin:u=1,scrollPercentMin:g=90}={},debug:d=!1}={},v=null){this.id=v??t,this.url=s,this.j=e,this.V=i,this.H=r,this.trigger={userEngagementMin:u,scrollPercentMin:g},n=["navigate","reload","back_forward"].filter(t=>!RegExp(`(?<=\\^)\\b${t}\\b`).test(n)&&(n.includes("*")||RegExp(`\\b${t}\\b`).test(n))),c&&([v,t]=c.split("&"),c=[v?.split(",").map(t=>t.trim()),t?.split(",").map(t=>t.trim())]),this.event={pageView:n,userEngagement:h,scroll:l,outbound:a,viewSearchResults:c,fileDownload:o},this.debug=d,this.init()}static A=()=>Math.ceil(Date.now()/1e3);static B=()=>Math.ceil(o.w.performance.now());send=(t,s=!0,{F:e=null,a:i=null,outbound:r=null,G:n=null,J:h=null,K:l=null}={})=>{var a=v.A();a-this.L>this.j&&(u.R(this.id+"-sid_v4"),this.sct+=1,this.L=0,this.O=0,this.$=0,this.seg=0);const c={en:t};o.d.hidden||this.W(),c._et=this._et,this._et=0,this.C||(this.cid=v.A()+"."+v.A(),c._fv=1),this.I||(this.sid=v.A(),c._ss=1),this.D&&(this.D=!1,c._ee=1),this.L=a,"scroll"==t?c["epn.percent_scrolled"]=e??0:"page_view"==t?this.O++:"click"==t||"file_download"==t?(e=(a=new g(i)).URL,c["ep.link_id"]=a.N("id")??"",c["ep.link_url"]=e?.href??"",l?(c["X"]=a.text,c["ep.file_name"]=e?.pathname??"",c["ep.file_extension"]=l):r&&(c["ep.link_classes"]=a.N("class")??"",c["ep.link_domain"]=e?.hostname??"",c["ep.outbound"]=!0)):"view_search_results"==t&&(c["ep.search_term"]=n,h.forEach(t=>{var[t,s]=t;c["ep.q_"+t]=s}));i=d.join("",c,!0);this.P.push(1<i.length?i.substring(1):i),s?(clearTimeout(this.U),this.U=setTimeout(this.request,5e3)):this.request()};request=()=>{var t;o.n.sendBeacon&&this.P.length&&(t=v.B(),t={v:2,tid:this.id,_p:this._p,sr:screen.width+"x"+screen.height,ul:o.n.language.toLowerCase(),cid:this.cid,_s:this._s++,uamb:o._?0:1,dl:location.origin+location.pathname,dt:o.d.title,sid:this.sid,sct:this.sct,tfd:t},o.d.referrer&&(t.dr=o.d.referrer),this.debug&&(t._dbg=1),t.seg=this.seg,t=d.join(this.url,t,!0),o.n.sendBeacon(t,this.P.join("\r\n")),this.P.length=0)};init=()=>{const{event:i,trigger:s}=this;var[t]=o.w.performance.getEntriesByType("navigation");if(i.pageView?.includes(t?.type)&&this.send("page_view",!1),"visible"==this.H?o.d.addEventListener("visibilitychange",t=>{o.d.hidden?this.W():this.q=v.B()}):"focus"==this.H&&(o.w.addEventListener("blur",t=>this.W()),o.w.addEventListener("focus",t=>this.q=v.B())),i.userEngagement&&o.w.addEventListener(i.userEngagement,t=>{v.B()>1e3*s.userEngagementMin&&this.send("user_engagement",!1)}),i.scroll&&(o.g("ga4",i.scroll),o.o("ga4",t=>{t>=s.scrollPercentMin&&(this.send("scroll",!0,{F:s.scrollPercentMin}),s.scrollPercentMin=Number.MAX_VALUE)})),new g("a").k(t=>{t=new g(t);const s=t.URL;if(s){if(i.fileDownload){const e=new RegExp(i.fileDownload).exec(s.href)?.[0];e&&t.m("click",t=>this.send("file_download",!0,{a:t.currentTarget,K:e}))}i.outbound&&s.hostname!=location.hostname&&!i.outbound.some(t=>new RegExp(t).test(s.hostname))&&t.m("click",t=>this.send("click",!0,{a:t.currentTarget,outbound:!0}))}}),i.viewSearchResults){var[t,e]=i.viewSearchResults;const r=new URL(location).searchParams;t=t?.find(t=>r.get(t));if(t){const n=[];e?.forEach(t=>{r.has(t)&&n.push([t,r.get(t)])}),this.send("view_search_results",!0,{G:r.get(t),J:n})}}};W=()=>{var t=v.B(),s=t-this.q;this._et+=s,this.$+=s,this.q=t}}function s(s){Array.isArray(s.id)?s.id.forEach(t=>new v(s,t)):new v(s)}function t(){var t=window.__GA4__;t&&(Array.isArray(t)?t.forEach(t=>s(t)):s(t))}t();
})();